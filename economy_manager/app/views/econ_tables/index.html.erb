<div id="econ_tables">
  <p style="color: green"><%= notice %></p>

  <% content_for :title, "Econ tables" %>

  <h1>Major Table</h1>

  <%= link_to "New Entry", new_econ_table_path, class: "btn btn-primary" %>

  <table border="1" cellpadding="10" cellspacing="0">
    <thead>
      <tr>
        <th></th>
        <th>Acronym</th>
        <th>Name</th>
        <th>Disposition</th>
        <th>Gross</th>
        <th>Trade</th>
        <th>Expenditure</th>
        <th>Reserve</th>
        <th>Defecit</th>
        <th>CO</th>
        <th>ISO</th>
        <th>ANT</th>
        <th>State</th>
        <th>Ind</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @econ_tables.each do |econ_table| %>
        <tr>
          <td>
            <% if econ_table.imgUrl.present? %>
              <% begin %>
                <%= image_tag econ_table.imgUrl, alt: econ_table.name, onerror: "this.onerror=null;this.src='/fallback_image.jpg';", style: "max-width: 100px; max-height: 100px;" %>
              <% rescue %>
                <%= image_tag '/fallback_image.jpg', alt: "Invalid Image", style: "max-width: 150px; max-height: 150px;" %>
              <% end %>
            <% else %>
              <%= image_tag '/fallback_image.jpg', alt: "No Image Provided", style: "max-width: 150px; max-height: 150px;" %>
            <% end %>
          </td>
          <td><%= econ_table.acronym %></td>
          <td><%= econ_table.name %></td>
          <td><%= econ_table.status %></td>
          <td><%= number_to_currency(econ_table.gross, unit: "$", precision: 0) %></td>
          <td><%= number_to_currency(econ_table.trade, unit: "$", precision: 0) %></td>
          <td><%= number_to_currency(econ_table.expenditure, unit: "$", precision: 0) %></td>
          <td><%= number_to_currency(econ_table.reserve, unit: "$", precision: 0) %></td>
          <td><%= number_to_currency(econ_table.calculated_deficit, unit: "$", precision: 0) %></td> <!-- Dynamically calculated value -->
          <td><%= econ_table.co %></td>
          <td><%= econ_table.iso %></td>
          <td><%= econ_table.ant %></td>
          <td><%= econ_table.state %></td>
          <td><%= econ_table.ind %></td>
          <td>
            <%= link_to "Edit", edit_econ_table_path(econ_table), class: "btn btn-warning" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<div id="ai_tables">
  <p style="color: green"><%= notice %></p>

  <%= link_to "New Entry", new_econ_table_path, class: "btn btn-primary" %>

  <h2>Minor Table</h2>
  <table border="1" cellpadding="10" cellspacing="0">
    <thead>
      <tr>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @ai_tables.each do |ai_table| %>
        <tr>
          
          <td>
            <%= link_to 'Edit', edit_ai_table_path(ai_table) %> |
            <%= link_to 'Delete', ai_table, method: :delete, data: { confirm: 'Are you sure?' } %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>